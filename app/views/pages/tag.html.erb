<div>
    <!-- left hand side layout -->
    <div class="col-md-9 panel panel-default"> 
        <span id="notice"><%= notice %></span>
        <div class="row">
            <div class="col-md-10">
                <h2><b>#<%= @tag %></b></h2>
            </div>
            <div class="col-md-2">
                <br>
                <%= link_to 'Follow Tag', follow_tag_path, class: "btn btn-success"%>
            </div>
        </div>


        <!-- display questions -->
        <h4><b>Questions</b></h4>
        <table class="table table-striped table-hover">
          <tbody>
            <% @questions.each do |question| %>
              <tr>
                <td style="position:relative; padding:5px">
                    <!-- right div: up/down arrows -->
                    <div style="float:right">
                        <div> <!-- up arrow -->
                            <% if current_user.voted_up_on? question %>
                                <button class="btn btn-default btn-xs" disabled="true">
                                 <span class="glyphicon glyphicon-menu-up" aria-hidden="true"></span> 
                                 </button>  
                            <% else %>
                                <% if current_user.voted_down_on? question %>
                                    <%= button_to question_undodownvote_path(question), class:"btn btn-default btn-xs", method: :put, remote: true do %>
                                     <span class="glyphicon glyphicon-menu-up" aria-hidden="true"></span>   
                                    <% end %>           
                                <% else %>
                                    <%= button_to question_upvote_path(question), class:"btn btn-default btn-xs", method: :put, remote: true do %>
                                     <span class="glyphicon glyphicon-menu-up" aria-hidden="true"></span>   
                                    <% end %>
                                <% end %>
                            <% end %>
                        </div>

                        <!-- current ranking -->
                        <div class="text-center" style="line-height: 20px;height: 20px;">
                            <%= question.weighted_score %>
                        </div>
                        <div> <!-- down arrow -->
                            <% if current_user.voted_down_on? question %>
                                <button class="btn btn-default btn-xs" disabled="true">
                                    <span class="glyphicon glyphicon-menu-down" aria-hidden="true"></span>
                                </button>   
                            <% else %>
                                <% if current_user.voted_up_on? question %>
                                    <%= button_to question_undoupvote_path(question), class:"btn btn-default btn-xs", method: :put, remote: true do %>
                                        <span class="glyphicon glyphicon-menu-down" aria-hidden="true"></span>   
                                    <% end %>           
                                <% else %>
                                    <%= button_to question_downvote_path(question), class:"btn btn-default btn-xs", method: :put, remote: true do %>
                                        <span class="glyphicon glyphicon-menu-down" aria-hidden="true"></span>   
                                    <% end %>
                                <% end %>
                            <% end %>
                        </div>
                    </div>
                    <!-- left div: question -->
                    <div>
                        <!-- display question headline -->
                        <%= link_to question.headline, question, style:"font-size:16px" %>
                        <br>
                        <!-- display question content (first 75 chars) -->
                        <%= question.content.truncate(115) %>
                        <p>            
                          <% question.tag_list.each do |tag| %>
                                <a href="/tag/<%=tag%>" class="label label-pill label-info" style="text-decoration:none"><%= tag %></a>
                          <% end %>
                        </p>    
                        <!-- display how long ago the question was created-->
                        <div class="grey-text" style="font-size: 12px;">
                            <% if question.created_at > Time.now.beginning_of_day %>
                                <%="#{time_ago_in_words(question.created_at)} ago"%> 
                            <% else %>
                                <%= question.created_at.strftime("%b %d, %Y") %> 
                            <% end %>
                        </div>                                            
                    </div>
                </td>
              </tr>
            <% end %>
          </tbody>
        </table>
        <br>
    </div>

    <!-- right hand side layout -->
    <div class="col-md-3"> 

        <!-- container for user info -->
        <div class="panel panel-default">
          <div class="panel-body">
            <h5><b>@<%= current_user.username %></b></h5>
          </div>
          <div class="panel-footer">Notifications</div>
        </div>
        <div class="divider"></div>
        <!-- container for followed tags -->
        <div class="panel panel-default">
            <div class="panel-body">
                <p style="font-size: 16px;"><b>Followed tags</b></p>
            </div>
        </div>
        <div class="divider"></div>
        <!-- container for trending tags -->
        <div class="panel panel-default">
            <div class="panel-body">
                <p style="font-size: 16px;"><b>Trending tags</b></p>
                <div id='tag_cloud'>
                  <% tag_cloud Question.tag_counts, %w{s m l} do |tag, css_class| %>
                      <%= link_to tag.name, tag_path(tag.name), class: css_class %>
                  <% end %>
                </div>       
            </div>
 </div>
        <div class="divider"></div>
    </div>
</div>