<div>
    <!-- left hand side layout -->
    <div class="col-md-9"> 
        <span id="notice"><%= notice %></span>

        <!-- search bar -->
        <br>
        <div class="row">
            <div class="col-md-10">
                <h4><b>Search questions</b></h4>
                <%= form_tag(questions_path, method: :get) do %>
                    <%= text_field_tag :term, params[:term] %>
                    <%= submit_tag 'Search', name: nil, class:"btn btn-default btn-xs" %>
                <% end %>
            </div>
            <div class="col-md-2">
                <br>
                <br>
                <%= link_to 'New Question', new_question_path, class: "btn btn-info"%>
            </div>
        </div>
        <!-- display questions -->
    	<h4><b>Questions</b></h4>
    	<table class="table table-striped table-hover">
    	  <tbody>
    	    <% @questions.each do |question| %>
    	      <tr>
    	        <td style="position:relative; padding:5px">
                    <!-- right div: up/down arrows -->
                    <div style="float:right">
                        <div> <!-- up arrow -->
                            <% if current_user.voted_up_on? question %>
                                <button class="btn btn-default btn-xs" disabled="true">
                                 <span class="glyphicon glyphicon-menu-up" aria-hidden="true"></span> 
                                 </button>  
                            <% else %>
                                <% if current_user.voted_down_on? question %>
                                    <%= button_to question_undodownvote_path(question), class:"btn btn-info btn-xs", method: :put, remote: true do %>
                                     <span class="glyphicon glyphicon-menu-up" aria-hidden="true"></span>   
                                    <% end %>           
                                <% else %>
                                    <%= button_to question_upvote_path(question), class:"btn btn-info btn-xs", method: :put, remote: true do %>
                                     <span class="glyphicon glyphicon-menu-up" aria-hidden="true"></span>   
                                    <% end %>
                                <% end %>
                            <% end %>
                        </div>

                        <!-- current ranking -->
                        <div class="text-center" style="line-height: 20px;height: 20px;">
                            <%= question.weighted_score %>
                        </div>
                        <div> <!-- down arrow -->
                            <% if current_user.voted_down_on? question %>
                                <button class="btn btn-default btn-xs" disabled="true">
                                    <span class="glyphicon glyphicon-menu-down" aria-hidden="true"></span>
                                </button>   
                            <% else %>
                                <% if current_user.voted_up_on? question %>
                                    <%= button_to question_undoupvote_path(question), class:"btn btn-info btn-xs", method: :put, remote: true do %>
                                        <span class="glyphicon glyphicon-menu-down" aria-hidden="true"></span>   
                                    <% end %>           
                                <% else %>
                                    <%= button_to question_downvote_path(question), class:"btn btn-info btn-xs", method: :put, remote: true do %>
                                        <span class="glyphicon glyphicon-menu-down" aria-hidden="true"></span>   
                                    <% end %>
                                <% end %>
                            <% end %>
                        </div>
                    </div>
                    <!-- left div: question -->
                    <div>
                        <!-- display question headline -->
        	        	<%= link_to question.headline, question %>
                        <br>
                        <b>Tags:</b>
                          <%= raw question.tag_list.join(', ') %>
                        <br>
                        <!-- display how long ago the question was created-->
                        <div class="grey-text" style="font-size: 12px;">
                            <% if question.created_at > Time.now.beginning_of_day %>
                                <%="#{time_ago_in_words(question.created_at)} ago"%> 
                            <% else %>
                                <%= question.created_at.strftime("%b %d, %Y") %> 
                            <% end %>
                        </div>
                        <!-- display question content (first 75 chars) -->
                        <%= question.content.truncate(115) %>
                    </div>
    			</td>
    	      </tr>
    	    <% end %>
    	  </tbody>
    	</table>
    	<br>
    </div>

    <!-- right hand side layout -->
    <div class="col-md-3"> 

        <!-- container for user info -->
        <div class="section">
            <h5><b><%= current_user.username %></b></h5>
            <p> <%= current_user.email %> </p>
        </div>
        <div class="divider"></div>
        <!-- container for followed tags -->
        <div class="section">
            <p style="font-size: 16px;"><b>Followed tags</b></p>
        </div>
        <div class="divider"></div>
        <!-- container for trending tags -->
        <div class="section">
            <p style="font-size: 16px;"><b>Trending tags</b></p>
        </div>
        <div class="divider"></div>
	</div>
</div>