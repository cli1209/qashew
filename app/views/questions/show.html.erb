<div> 
	<!-- left hand side layout -->
    <div class="col-md-8"> 
		<span id="notice"><%= notice %></span>
		<!-- display the question -->
		<div class="panel panel-default">
			<div class="panel-body">
				<!-- right div: up/down arrows -->
				<div style="float:right">
					<br>
				    <div> <!-- up arrow -->
				        <% if current_user.voted_up_on? @question %>
				            <button class="btn btn-default btn-sm" disabled="true">
				             <span class="glyphicon glyphicon-menu-up" aria-hidden="true"></span> 
				             </button>  
				        <% else %>
				            <% if current_user.voted_down_on? @question %>
				                <%= button_to question_undodownvote_path(@question), class:"btn btn-default btn-sm", method: :put, remote: true do %>
				                 <span class="glyphicon glyphicon-menu-up" aria-hidden="true"></span>   
				                <% end %>           
				            <% else %>
				                <%= button_to question_upvote_path(@question), class:"btn btn-default btn-sm", method: :put, remote: true do %>
				                 <span class="glyphicon glyphicon-menu-up" aria-hidden="true"></span>   
				                <% end %>
				            <% end %>
				        <% end %>
					</div>

				    <!-- current ranking -->
				    <div class="text-center" style="font-size:16px;line-height: 22px;height: 22px;">
				        <%= @question.weighted_score %>
				    </div>

				    <div> <!-- down arrow -->
				        <% if current_user.voted_down_on? @question %>
				            <button class="btn btn-default btn-sm" disabled="true">
				                <span class="glyphicon glyphicon-menu-down" aria-hidden="true"></span>
				            </button>   
				        <% else %>
				            <% if current_user.voted_up_on? @question %>
				                <%= button_to question_undoupvote_path(@question), class:"btn btn-default btn-sm", method: :put, remote: true do %>
				                    <span class="glyphicon glyphicon-menu-down" aria-hidden="true"></span>   
				                <% end %>           
				            <% else %>
				                <%= button_to question_downvote_path(@question), class:"btn btn-default btn-sm", method: :put, remote: true do %>
				                    <span class="glyphicon glyphicon-menu-down" aria-hidden="true"></span>   
				                <% end %>
				            <% end %>
				        <% end %>
				    </div>
				</div>
				<div>
		      		<span class="glyphicon glyphicon-hand-left" aria-hidden="true"></span>
					<%= link_to 'Back', questions_path %>
					<p>
					  <span style="font-size:20px"><b><%= @question.headline %></b></span>
					</p>
					<p>
					  <% @question.tag_list.each do |tag| %>
					  		<span class="label label-pill label-info"><%= tag %></span>
					  <% end %>
					</p>
					<p>
					  <span style="font-size:16px"><%= @question.content %></span>
					</p>
				</div>
			</div>
			<div class="panel-footer">
				<p class="text-right text-muted">
					Updated 
					<span class="grey-text">
						<% if @question.created_at > Time.now.beginning_of_day %>
						    <%="#{time_ago_in_words(@question.created_at)} ago"%> 
						<% else %>
						    <%= @question.created_at.strftime("%b %d, %Y") %> 
						<% end %>
					</span>	
					by <%=User.find_by_id(@question.user_id).username%>
				</p>
	        </div>
		</div>
		<!-- display answer submission panel -->
		<div class="panel panel-default">
			<div class="panel-body">
				<div>
					<%= form_for [@question, Answer.new] do |f| %>
						<%= f.text_area :content, placeholder: "Add an answer", class:"form-control" %><br/>
						<%= f.submit "Submit Answer", class:"btn btn-default pull-right" %>
					<% end %>
				</div>
				<div>
				<br>
				<br>			
				<br>
					<!-- display all the answers -->

	    		<% @question.answers.each do |answer| %>
	    			<div id="answer<%= answer.id %>">
					  <%= render(partial: 'answers/answer', locals: {answer: answer})%>
					</div>
				<% end %>

				</div>
			</div>
		</div>
    </div>

    <!-- right hand side layout -->
    <div class="col-md-4"> 
    	<!-- container for user info -->
        <div class="panel panel-default">
          <div class="panel-body">
            <h5><b>@<%= current_user.username %></b></h5>
          </div>
          <div class="panel-footer">
            Notifications <span class="badge badge-pill badge-danger">0</span>
          </div>
        </div>
        <div class="divider"></div>
        <!-- container for followed tags -->
        <div class="panel panel-default">
            <div class="panel-body">
                <div>
                    <%= form_tag(questions_path, method: :get, class:"form-horizontal") do %>
                        <%= text_field_tag :term, params[:term], style:"width:80%", class:"form-control col-sm-6", placeholder: "Search by keyword, tag..." %>
                        <%= button_tag(:type => 'submit', style:"float:right;", :class => 'btn btn-default col-sm-2') do %>
                                <span class="glyphicon glyphicon-search"></span>
                        <% end %>
                    <% end %>
                </div>
                <br><br><br>
                <div>
                    <p style="font-size: 16px;"><b>Trending tags</b></p>
                    <div id='tag_cloud'>
                      <% tag_cloud Question.tag_counts, %w{h5 h4 h3 h2} do |tag, css_class| %>
                          <%= link_to tag.name, tag_path(tag.name), class: css_class %>
                      <% end %>
                    </div>
                </div>       
            </div>
        </div>
	</div>
</div>
